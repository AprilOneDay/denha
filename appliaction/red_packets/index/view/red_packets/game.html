<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>html5手机端抢红包雨代码 - A5源码</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">		
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
<!--在iPhone 手机上禁止了把数字转化为拨号链接-->
<meta content="telephone=no" name="format-detection" />
<!--删除默认的苹果工具栏和菜单栏-->
<meta content="yes" name="apple-mobile-web-app-capable">
<!-- 网站开启对web app程序的支持，在web app应用下状态条（屏幕顶部条）的颜色，默认值为default（白色），可以定为black（黑色）和black-translucent（灰色半透明）-->
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet" type="text/css" href="{F:getConfig('config','ststic')}/red_packets/css/demo.css" />
<link rel="stylesheet" type="text/css" href="{F:getConfig('config','ststic')}/red_packets/css/sweet-alert.css">
<script type="text/javascript" src="{F:getConfig('config','ststic')}/red_packets/js/jquery-1.12.3.min.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		var win = (parseInt($(".couten").css("width"))) - 60;
		$(".mo").css("height", $(document).height());
		$(".couten").css("height", $(document).height());
		$(".backward").css("height", $(document).height());
		$("li").css({});
		// 点击确认的时候关闭模态层
		$(".sen a").click(function(){
		  $(".mo").css("display", "none")
		});
		
		var del = function(){
			nums++;
//					console.info(nums);
//					console.log($(".li" + nums).css("left"));
			$(".li" + nums).remove();
			setTimeout(del,200)
		}
		
		var add = function() {
			var hb = parseInt(Math.random() * (4 - 1) + 1);
			var Wh = parseInt(Math.random() * (70 - 30) + 20);
			var Left = parseInt(Math.random() * (win - 0) + 0);
			var rot = (parseInt(Math.random() * (45 - (-45)) - 45)) + "deg";
			//				console.log(rot)
			num++;
			$(".couten").append("<li class='li" + num + "' ><a href='javascript:;'><img src='{F:getConfig('config','ststic')}/red_packets/images/hb_" + hb + ".png' data-tag="+ hb +"></a></li>");
			$(".li" + num).css({
				"left": Left,
			});
			$(".li" + num + " a img").css({
				"width": Wh,
				"transform": "rotate(" + rot + ")",
				"-webkit-transform": "rotate(" + rot + ")",
				"-ms-transform": "rotate(" + rot + ")", /* Internet Explorer */
				"-moz-transform": "rotate(" + rot + ")", /* Firefox */
				"-webkit-transform": "rotate(" + rot + ")",/* Safari 和 Chrome */
				"-o-transform": "rotate(" + rot + ")" /* Opera */
			});	
			$(".li" + num).animate({'top':$(window).height()+20},5000,function(){
				//删掉已经显示的红包
				this.remove()
			});
			//点击红包的时候弹出模态层
			$(".li" + num).click(function(){
				var tag = $(this).find('img').attr('data-tag');
				//炸弹停止游戏
				if(tag == 2){
					$(".mo").css("display", "block")
				}
			});
			setTimeout(add,200)
		}	
		
		//增加红包
		var num = 0;
		setTimeout(add,3000);
		
		//倒数计时
		var backward = function(){
			numz--;
			if(numz>0){
				$(".backward span").html(numz);
			}else{
				$(".backward").remove();
			}
			setTimeout(backward,1000)
					
		}
		
		var numz = 4;
		backward();
	
	})
</script>

</head>
<body>
<ul class="couten">
	<!--<li>
		<a href="#"><img src="images/hb_1.png"></a>
	</li>-->
</ul>
<div class="mo">
	<div class="sen">
		<img src="images/gx.png">
		<h3>获得红包3元</h3>
		<a href="#">确定</a>
	</div>
</div>
<div class="backward">
	<span></span>
</div>		
</body>
</html>
