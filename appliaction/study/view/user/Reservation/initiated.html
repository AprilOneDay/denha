
<!DOCTYPE html>
<html>
   <head>
        <title>学生门户-预约一对一辅导</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Content-Type" content="charset=utf-8" />
        <link rel="stylesheet" href="/ststic/study/css/base.css">
        <link rel="stylesheet" href="/ststic/study/css/center.css">
        <link rel="stylesheet" href="/ststic/study/css/u_mob.css"> 
        <script src="/ststic/study/js/jquery.min.js"></script>
        <script type="text/javascript" src="/ststic/study/js/moment.js"></script>
        <script type="text/javascript" src="/ststic/study/js/bootstrap-datetimepicker.js"></script>
      
        <script type="text/javascript" src="/ststic/study/js/menu.js"></script>
        <script type="text/javascript" src="/ststic/study/js/common.js"></script>
        <script type="text/javascript" src="/vendor/layer/layer.js"></script>

   </head>
<body bgcolor="f1f1f1" >
	
        <div class="center">
        	<div id="navbar"><span><i class="ico2"></i>学生门户-预约一对一辅导</span><a href="javascript:;" class="menubtn"></a>
        {include public/left_menus}
    </div>
        <div class="classroom_right">
        		<h3 class=" t_students t_coach">预约一对一辅导</h3>
        	<div class="t_cr_left fl">
            	<b class="class_b">同学您好！</b>
                <span class="class_s">提交预约后请耐心等待，预约结果会在你的预约列表中。</span>
                       <a class="begain_ans clearfix"  href="{F:url('index')}">返回列表</a>
            </div>
        	<div class="t_cr_right fr yy_pp navgation">
                <form class="yuyue_fo">
                    <input type="hidden" name="start_time" value="">
                    <input type="hidden" name="end_time" value="">
                    <input type="hidden" name="order_sn" value="">
<!--                     <p><span>学生姓名：</span><input type="text" placeholder="请输入"/></p>
                    <div style="width:100%; height:20px" class="clearfix"></div> -->
                    <p><span>预约课程：</span>
                    	<dl class="select selects">
                            <dt>请选择</dt>
                            <dd>
                                <ul class="selects_ul">
                                    {loop $courseList $value}
                                        <li><a href="javascript:;" data-value="{$value['order_sn']}">{$value['title']}</a></li>
                                    {/loop}
                                </ul>
                            </dd>
                        </dl>
                    </p>
                    <div style="width:100%; height:20px"></div>
                    <p><span>预约时间：</span>
                    <div class="date-choice">
                        <input type="text" placeholder="开始时间" name="tmp_start_time">
                    </div>
            	       <dl class="select select2">
                            <dt>请选择</dt>
                            <dd>
                                <ul>
                                    <li><a href="javascript:;" data-start="08:00" data-end="08:30">08:00-08:30</a></li>
                                    <li><a href="javascript:;" data-start="08:30" data-end="09:00">08:30-09:00</a></li>
                                    <li><a href="javascript:;" data-start="09:00" data-end="09:30">09:00-09:30</a></li>
                                    <li><a href="javascript:;" data-start="09:30" data-end="10:00">09:30-10:00</a></li>
                                    <li><a href="javascript:;" data-start="10:00" data-end="10:30">10:00-10:30</a></li>
                                    <li><a href="javascript:;" data-start="10:30" data-end="11:00">10:30-11:00</a></li>
                                    <li><a href="javascript:;" data-start="11:00" data-end="11:30">11:00-11:30</a></li>
                                    <li><a href="javascript:;" data-start="11:30" data-end="12:00">11:30-12:00</a></li>
                                    <li><a href="javascript:;" data-start="12:30" data-end="13:00">12:30-13:00</a></li>
                                    <li><a href="javascript:;" data-start="13:00" data-end="13:30">13:00-13:30</a></li>
                                    <li><a href="javascript:;" data-start="13:30" data-end="14:00">13:30-14:00</a></li>
                                    <li><a href="javascript:;" data-start="14:00" data-end="14:30">14:00-14:30</a></li>
                                    <li><a href="javascript:;" data-start="14:30" data-end="15:00">14:30-15:00</a></li>
                                    <li><a href="javascript:;" data-start="15:00" data-end="15:30">15:00-15:30</a></li>
                                    <li><a href="javascript:;" data-start="15:30" data-end="16:00">15:30-16:00</a></li>
                                    <li><a href="javascript:;" data-start="16:00" data-end="16:30">16:00-16:30</a></li>
                                    <li><a href="javascript:;" data-start="16:30" data-end="16:00">16:30-16:00</a></li>
                                    <li><a href="javascript:;" data-start="17:00" data-end="17:30">17:00-17:30</a></li>
                                    <li><a href="javascript:;" data-start="17:30" data-end="18:00">17:30-18:00</a></li>
                                    <li><a href="javascript:;" data-start="18:00" data-end="18:30">18:00-18:30</a></li>
                                    <li><a href="javascript:;" data-start="18:30" data-end="19:00">18:30-19:00</a></li>
                                    <li><a href="javascript:;" data-start="19:00" data-end="19:30">19:00-19:30</a></li>
                                    <li><a href="javascript:;" data-start="19:30" data-end="20:00">19:30-20:00</a></li>
                                    <li><a href="javascript:;" data-start="20:00" data-end="20:30">20:00-20:30</a></li>
                                    <li><a href="javascript:;" data-start="20:30" data-end="21:00">20:30-21:00</a></li>
                                    <li><a href="javascript:;" data-start="21:00" data-end="21:30">21:00-21:30</a></li>
                                    <li><a href="javascript:;" data-start="21:30" data-end="22:00">21:30-22:00</a></li>
                                    <li><a href="javascript:;" data-start="22:00" data-end="22:30">22:00-22:30</a></li>
                                    <li><a href="javascript:;" data-start="22:30" data-end="23:00">22:30-23:00</a></li>
                                    <li><a href="javascript:;" data-start="23:00" data-end="23:30">23:00-23:30</a></li>
                                    <li><a href="javascript:;" data-start="23:30" data-end="00:00">23:30-00:00</a></li>
                                </ul>
                            </dd>
                        </dl>

                    </p>
                    <div style="width:100%; height:20px"></div>
                    <p><span>咨询内容：</span><textarea name="user_msg" cols="" rows="" placeholder="请输入您所需的内容"></textarea></p>
                    
                     <p><span>联系方式：</span><input type="text" name="mobile" placeholder="微信/qq/电话  选填一个即可"/></p>
                     <div style="width:100%; height:20px"></div>
                    <p><span></span><a class="brn_yuyue" href="javascript:;">立即预约</a></p>
                </form>
                
                
            </div>
        </div>
        </div>
        
        
</body>
<script type="text/javascript">
$(function(){
	$(".select").each(function(){
		var s=$(this);
		var z=parseInt(s.css("z-index"));
		var dt=$(this).children("dt");
		var dd=$(this).children("dd");
		var _show=function(){dd.slideDown(200);dt.addClass("cur");s.css("z-index",z+1);};   //展开效果
		var _hide=function(){dd.slideUp(200);dt.removeClass("cur");s.css("z-index",z);};    //关闭效果
		dt.click(function(){
            dd.is(":hidden")?_show():_hide();
        });
		dd.find("a").click(function(){
            dt.html($(this).html());_hide();
            var start_time = $(this).attr('data-start');
            var end_time = $(this).attr('data-end');
            var order_sn = $(this).attr('data-value');

            if(start_time && end_time){
                $('input[name=start_time]').val(start_time);
                $('input[name=end_time]').val(end_time);
            }  

            if( order_sn){
                $('input[name=order_sn]').val(order_sn); 
            }

        });    

        //选择效果（如需要传值，可自定义参数，在此处返回对应的“value”值 ）
		$("body").click(function(i){
            !$(i.target).parents(".select").first().is(s) ? _hide():"";
            //$('input[name=order_sn]').val($(this).attr('data-value'));
        });

	})

    //提交预约
    $('.brn_yuyue').click(function(){
        var start_time = $('input[name=start_time]').val();
        var end_time = $('input[name=end_time]').val();
        var tmp_start_time = $('input[name=tmp_start_time]').val();
        var order_sn = $('input[name=order_sn]').val();
        var user_msg = $('textarea[name=user_msg]').val();
        var mobile = $('input[name=mobile]').val();

        if(!tmp_start_time){
           return layer.msg('请选择日期');
        }

        if(!start_time || !end_time){
           return layer.msg('请选择详细预约时间');
        }

        //整合时间
        start_time = tmp_start_time+' '+start_time;
        end_time   = tmp_start_time+' '+end_time;
        
        $.post("{F:url('add')}",{start_time:start_time,end_time:end_time,order_sn:order_sn,user_msg:user_msg,mobile:mobile},function(result){
            layer.msg(result.msg);
            if(result.status){
                setTimeout(function(){
                    window.location.href= '/user/reservation';
                },1000);
            }
        },"json")
    })
})

$(document).ready(function(){
    // date time picker
    $("input[name=tmp_start_time]").datetimepicker({
        locale:"zh-cn",
        format:"YYYY-MM-DD",
        dayViewHeaderFormat:"YYYY年 MMMM"
    });
})
</script>
</html>