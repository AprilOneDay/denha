
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>html 便签</title>
{include /public/global_css}
</head>

<body>
<div class="menus" id="menus">
	<ul>
		{loop $data['fliesList'] $value}
			<li draggable="true" data-id="{$value['id']}"><img src="{F:denha\Start::$config['ststic']}/blog/images/files.png" width="80" style="clear: both;"><br/>{$value['name']}</li>
		{/loop}
	</ul>
</div>
<div class="clearfix"></div>
<div class="note">
	<ul>
		<li draggable="true">
			<h2>Baici Liu:</h2>
			<p>小米的饥饿营销真是太坑爹了！ball shit!</p>
		</li>
		<li draggable="true" >
			<h2>Xiaoqiang Yan:</h2>
			<p>最近怎么没有妹纸发帖呢?recommend!recommend!</p>
		</li>
		<li draggable="true" >
			<h2>Pan Huang:</h2>
			<p>好饿啊！求带！hungry！hungry！</p>
		</li>
		<li draggable="true" >
			<h2>Feng Deng:</h2>
			<p>哎哟，那妹纸不错来着，看我去问个电话号码回来！come on!</p>
		</li>
		<li draggable="true" >
			<h2>star 张:</h2>
			<p>好好学习，天天向上！good good study!day day up!</p>
		</li>
		<li draggable="true" >
			<h2>某武林高手:</h2>
			<p>低于25000/month的面试再也不去了，他grandma的！</p>
		</li>
	</ul>
</div>

</body>
	{include /public/global_js}
	<script type="text/javascript" src="{F:getConfig('config','vendor')}/right_click/jquery.contextmenu.js"></script>
	<script type="text/javascript">
		$(function() {
	        $('body').contextPopup({
	          title: '',
	          items: [
	            {label:'创建文件夹',icon:'icons/shopping-basket.png',action:function() { createFile(); } },
	            {label:'创建文件',icon:'icons/receipt-text.png',action:function() { createText(); } },
	          ]
	        });

         	$('.menus li').contextPopup({
	          title: '',
	          items: [
	            {label:'创建文件夹',icon:'icons/shopping-basket.png',action:function() { createFile(); } },
	            {label:'创建文件',icon:'icons/receipt-text.png',action:function() { createText(); } },
	            {label:'设置密码',icon:'icons/receipt-text.png',action:function() { alert('clicked 2') } },
	            {label:'重命名',icon:'icons/application-monitor.png',action:function() { alert('clicked 4') } },
             	{label:'删除',icon:'icons/book-open-list.png',action:function() { alert('clicked 3') } },
	          ]
	        });


         	//保存文件夹
         	$('body').on('blur','input[name="name"]',function(){
         		var _this = this;
         		var name = $(this).val() ? $(this).val() : '新建文件夹';
         		$.post("{F:url('edit_file')}",{name:name},function(result){
         			if(result.status){
         				$(_this).after(name);
         				$(_this).remove();
         			}
         		},"json")
         	});

	        function createFile(){
	        	var html = '<li draggable="true" ><img src="/ststic/blog/images/files.png" width="80" style="clear: both;"><br/><input type="text" value="" placeholder="输入名称" name="name"></li>';
	        	$('.menus ul').append(html);
	        	$('input[name="name"]').focus();
	        	
	        	$('.menus li').contextPopup({
		          title: '',
		          items: [
		            {label:'创建文件夹',icon:'icons/shopping-basket.png',action:function() { createFile(); } },
		            {label:'创建文件',icon:'icons/receipt-text.png',action:function() { createText(); } },
		            {label:'设置密码',icon:'icons/receipt-text.png',action:function() { alert('clicked 2') } },
		            {label:'重命名',icon:'icons/application-monitor.png',action:function() { alert('clicked 4') } },
	             	{label:'删除',icon:'icons/book-open-list.png',action:function() { alert('clicked 3') } },
		          ]
		        });
	        }

	        function delFile(id){

	        }


	        function createText(){
	        	//iframe层
		        layer.open({
		            type: 2,
		            title: '新建文档',
		            shadeClose: true,
		            shade: 0.8,
		            fixed:true,
		            area: ['80%', '80%'],
		            content: ['{F:url('detail')}'] //iframe的url
		        });
	        }
      	});
	</script>
</html>
